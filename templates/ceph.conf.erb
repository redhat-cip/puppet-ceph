[global]
<% if @auth_type -%>
  auth cluster required = <%= @auth_type %>
  auth service required = <%= @auth_type %>
  auth client required = <%= @auth_type %>
<% end -%>
<% if @signatures_require -%>
  cephx require signatures = <%= @signatures_require %>
<% end -%>
<% if @signatures_cluster -%>
  cephx cluster require signatures = <%= @signatures_cluster %>
<% end -%>
<% if @signatures_service -%>
  cephx service require signatures = <%= @signatures_service %>
<% end -%>
<% if @signatures_sign_msgs -%>
  cephx sign messages = <%= @signatures_sign_msgs %>
<% end -%>
  keyring = /etc/ceph/keyring
<% if @cluster_network && @public_network -%>
  cluster network = <%= @cluster_network %>
  public network = <%= @public_network %>
<% end -%>
<% if @pool_default_pg_num -%>
  osd pool default pg num = <%= @pool_default_pg_num %>
<% end -%>
<% if @pool_default_pgp_num -%>
  osd pool default pgp num = <%= @pool_default_pgp_num %>
<% end -%>
<% if @pool_default_size -%>
  osd pool default size = <%= @pool_default_size %>
<% end -%>
<% if @pool_default_min_size -%>
  osd pool default min size = <%= @pool_default_min_size %>
<% end -%>
<% if @pool_default_crush_rule -%>
  osd pool default crush rule = <%= @pool_default_crush_rule %>
<% end -%>
<% if @mon_osd_full_ratio -%>
  mon osd full ratio = .<%= @mon_osd_full_ratio %>
<% end -%>
<% if @mon_osd_nearfull_ratio -%>
  mon osd nearfull ratio = .<%= @mon_osd_nearfull_ratio %>
<% end -%>

  fsid = <%= @fsid %>

[mon]
<% if @mon_init_members -%>
  mon initial members = <%= @mon_init_members %>
<% end -%>
  mon data = <%= @mon_data %>

[osd]
  osd journal size = <%= @journal_size_mb %>
  journal dio = <%= @osd_journal_dio %>
  filestore flusher = false
  osd data = <%= @osd_data %>
<% if @osd_journal_real -%>
  osd journal = <%= @osd_journal_real %>
<% end -%>
  osd mkfs type = <%= @osd_mkfs_type %>
<% if @osd_mkfs_options && @osd_mkfs_type -%>
  osd mkfs options <%= @osd_mkfs_type %> = <%= @osd_mkfs_options %>
<% end -%>
<% if @osd_mount_options && @osd_mkfs_type -%>
  osd mount options <%= @osd_mkfs_type %> = <%= @osd_mount_options %>
<% end -%>
  keyring = <%= @osd_data %>/keyring

<% if @mds_activate -%>
[mds]
  mds data = <%= @mds_data %>
  keyring = <%= @mds_data %>/keyring
<% end -%>

